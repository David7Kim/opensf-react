{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactProject\\\\opensales\\\\src\\\\board\\\\ScrollPaging.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function ScrollPaging() {\n  _s();\n\n  const [randomImageList, setRandomImageList] = useState([]);\n  const [page, setPage] = useState(1);\n\n  const handleScroll = () => {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n    console.log(\"스크롤 이벤트 발생\");\n\n    if (scrollTop + clientHeight >= scrollHeight) {\n      console.log(\"페이지 끝에 스크롤이 닿았음\");\n      setPage(prev => prev + 1);\n    }\n  };\n\n  const getRandomImageThenSet = async () => {\n    console.log(\"fetching 함수 호출됨\");\n\n    try {\n      const {\n        data\n      } = await axios.get(`https://picsum.photos/v2/list?page=${page}&limit=7`);\n      setRandomImageList(randomImageList.concat(data));\n    } catch {\n      console.error(\"fetching error\");\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"page ? \", page);\n    getRandomImageThenSet();\n  }, [page]);\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: randomImageList === null || randomImageList === void 0 ? void 0 : randomImageList.map(randomImage => /*#__PURE__*/_jsxDEV(\"img\", {\n      src: randomImage.download_url,\n      alt: \"random\"\n    }, randomImage.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this))\n  }, void 0, false);\n}\n/*-------------------------스크롤 페이징 구현부분 - ------------------*/\n\n_s(ScrollPaging, \"9B6m3dJNYKiXri6/1wqg9+Dwpkw=\");\n\n_c = ScrollPaging;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScrollPaging\");","map":{"version":3,"names":["useState","useEffect","React","axios","ScrollPaging","randomImageList","setRandomImageList","page","setPage","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","console","log","prev","getRandomImageThenSet","data","get","concat","error","window","addEventListener","removeEventListener","map","randomImage","download_url","id"],"sources":["D:/reactProject/opensales/src/board/ScrollPaging.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport axios from \"axios\";\r\n\r\ntype RandomImageType = {\r\n  id: string;\r\n  author: string;\r\n  width: number;\r\n  height: number;\r\n  url: string;\r\n  download_url: string;\r\n};\r\nexport function ScrollPaging() {\r\n  const [randomImageList, setRandomImageList] = useState<RandomImageType[]>([]);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const handleScroll = () => {\r\n    const scrollHeight = document.documentElement.scrollHeight;\r\n    const scrollTop = document.documentElement.scrollTop;\r\n    const clientHeight = document.documentElement.clientHeight;\r\n\r\n    console.log(\"스크롤 이벤트 발생\");\r\n\r\n    if (scrollTop + clientHeight >= scrollHeight) {\r\n      console.log(\"페이지 끝에 스크롤이 닿았음\");\r\n      setPage((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  const getRandomImageThenSet = async () => {\r\n    console.log(\"fetching 함수 호출됨\");\r\n    try {\r\n      const { data } = await axios.get(`https://picsum.photos/v2/list?page=${page}&limit=7`);\r\n      setRandomImageList(randomImageList.concat(data));\r\n    } catch {\r\n      console.error(\"fetching error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"page ? \", page);\r\n    getRandomImageThenSet();\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {randomImageList?.map((randomImage) => (\r\n        <img key={randomImage.id} src={randomImage.download_url} alt=\"random\" />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\n/*-------------------------스크롤 페이징 구현부분 - ------------------*/\r\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAUA,OAAO,SAASC,YAAT,GAAwB;EAAA;;EAC7B,MAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCN,QAAQ,CAAoB,EAApB,CAAtD;EACA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,CAAD,CAAhC;;EAEA,MAAMS,YAAY,GAAG,MAAM;IACzB,MAAMC,YAAY,GAAGC,QAAQ,CAACC,eAAT,CAAyBF,YAA9C;IACA,MAAMG,SAAS,GAAGF,QAAQ,CAACC,eAAT,CAAyBC,SAA3C;IACA,MAAMC,YAAY,GAAGH,QAAQ,CAACC,eAAT,CAAyBE,YAA9C;IAEAC,OAAO,CAACC,GAAR,CAAY,YAAZ;;IAEA,IAAIH,SAAS,GAAGC,YAAZ,IAA4BJ,YAAhC,EAA8C;MAC5CK,OAAO,CAACC,GAAR,CAAY,iBAAZ;MACAR,OAAO,CAAES,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAAP;IACD;EACF,CAXD;;EAaA,MAAMC,qBAAqB,GAAG,YAAY;IACxCH,OAAO,CAACC,GAAR,CAAY,iBAAZ;;IACA,IAAI;MACF,MAAM;QAAEG;MAAF,IAAW,MAAMhB,KAAK,CAACiB,GAAN,CAAW,sCAAqCb,IAAK,UAArD,CAAvB;MACAD,kBAAkB,CAACD,eAAe,CAACgB,MAAhB,CAAuBF,IAAvB,CAAD,CAAlB;IACD,CAHD,CAGE,MAAM;MACNJ,OAAO,CAACO,KAAR,CAAc,gBAAd;IACD;EACF,CARD;;EAUArB,SAAS,CAAC,MAAM;IACdc,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBT,IAAvB;IACAW,qBAAqB;EACtB,CAHQ,EAGN,CAACX,IAAD,CAHM,CAAT;EAKAN,SAAS,CAAC,MAAM;IACdsB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCf,YAAlC;IACA,OAAO,MAAM;MACXc,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqChB,YAArC;IACD,CAFD;EAGD,CALQ,EAKN,EALM,CAAT;EAOA,oBACE;IAAA,UACGJ,eADH,aACGA,eADH,uBACGA,eAAe,CAAEqB,GAAjB,CAAsBC,WAAD,iBACpB;MAA0B,GAAG,EAAEA,WAAW,CAACC,YAA3C;MAAyD,GAAG,EAAC;IAA7D,GAAUD,WAAW,CAACE,EAAtB;MAAA;MAAA;MAAA;IAAA,QADD;EADH,iBADF;AAOD;AAED;;GAhDgBzB,Y;;KAAAA,Y"},"metadata":{},"sourceType":"module"}