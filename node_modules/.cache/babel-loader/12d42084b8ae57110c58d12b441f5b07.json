{"ast":null,"code":"import _regeneratorRuntime from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import React from\"react\";import axios from\"axios\";// type RandomImageType = {\n//   id: string;\n//   author: string;\n//   width: number;\n//   height: number;\n//   url: string;\n//   download_url: string;\n// };\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ScrollPaging(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),randomImageList=_useState2[0],setRandomImageList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var handleScroll=function handleScroll(){var scrollHeight=document.documentElement.scrollHeight;var scrollTop=document.documentElement.scrollTop;var clientHeight=document.documentElement.clientHeight;console.log(\"스크롤 이벤트 발생\");if(scrollTop+clientHeight>=scrollHeight){console.log(\"페이지 끝에 스크롤이 닿았음\");setPage(function(prev){return prev+1;});}};var getRandomImageThenSet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"fetching 함수 호출됨\");_context.prev=1;_context.next=4;return axios.get(\"chatter/post?page=\".concat(page,\"&size=5\")).then(function(res){console.log(res);});case 4:result=_context.sent;_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.error(\"fetching error\");case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function getRandomImageThenSet(){return _ref.apply(this,arguments);};}();useEffect(function(){console.log(\"page ? \",page);getRandomImageThenSet();},[page]);useEffect(function(){window.addEventListener(\"scroll\",handleScroll);return function(){window.removeEventListener(\"scroll\",handleScroll);};},[]);return/*#__PURE__*/_jsx(_Fragment,{});}/*-------------------------스크롤 페이징 구현부분 - ------------------*/","map":{"version":3,"names":["useState","useEffect","React","axios","ScrollPaging","randomImageList","setRandomImageList","page","setPage","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","console","log","prev","getRandomImageThenSet","get","then","res","result","error","window","addEventListener","removeEventListener"],"sources":["D:/reactProject/opensales/src/board/ScrollPaging.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// type RandomImageType = {\r\n//   id: string;\r\n//   author: string;\r\n//   width: number;\r\n//   height: number;\r\n//   url: string;\r\n//   download_url: string;\r\n// };\r\nexport default function ScrollPaging() {\r\n  const [randomImageList, setRandomImageList] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n\r\n  const handleScroll = () => {\r\n    const scrollHeight = document.documentElement.scrollHeight;\r\n    const scrollTop = document.documentElement.scrollTop;\r\n    const clientHeight = document.documentElement.clientHeight;\r\n\r\n    console.log(\"스크롤 이벤트 발생\");\r\n\r\n    if (scrollTop + clientHeight >= scrollHeight) {\r\n      console.log(\"페이지 끝에 스크롤이 닿았음\");\r\n      setPage((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  const getRandomImageThenSet = async () => {\r\n    console.log(\"fetching 함수 호출됨\");\r\n    try {\r\n      // const { data } = await axios.get(`https://picsum.photos/v2/list?page=${page}&limit=7`);\r\n      const result = await axios.get(`chatter/post?page=${page}&size=5`).then((res) => {\r\n        console.log(res);\r\n      });\r\n      // setRandomImageList(randomImageList.concat(data));\r\n    } catch {\r\n      console.error(\"fetching error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"page ? \", page);\r\n    getRandomImageThenSet();\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {/* {randomImageList?.map((randomImage) => (\r\n        <img key={randomImage.id} src={randomImage.download_url} alt=\"random\" />\r\n      ))} */}\r\n    </>\r\n  );\r\n}\r\n\r\n/*-------------------------스크롤 페이징 구현부분 - ------------------*/\r\n"],"mappings":"6VAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;gGACA,cAAe,SAASC,aAAT,EAAwB,CACrC,cAA8CJ,QAAQ,CAAC,EAAD,CAAtD,wCAAOK,eAAP,eAAwBC,kBAAxB,eACA,eAAwBN,QAAQ,CAAC,CAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,GAAMC,aAAY,CAAGC,QAAQ,CAACC,eAAT,CAAyBF,YAA9C,CACA,GAAMG,UAAS,CAAGF,QAAQ,CAACC,eAAT,CAAyBC,SAA3C,CACA,GAAMC,aAAY,CAAGH,QAAQ,CAACC,eAAT,CAAyBE,YAA9C,CAEAC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAEA,GAAIH,SAAS,CAAGC,YAAZ,EAA4BJ,YAAhC,CAA8C,CAC5CK,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACAR,OAAO,CAAC,SAACS,IAAD,QAAUA,KAAI,CAAG,CAAjB,EAAD,CAAP,CACD,CACF,CAXD,CAaA,GAAMC,sBAAqB,4FAAG,gJAC5BH,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAD4B,sCAILb,MAAK,CAACgB,GAAN,6BAA+BZ,IAA/B,aAA8Ca,IAA9C,CAAmD,SAACC,GAAD,CAAS,CAC/EN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACD,CAFoB,CAJK,QAIpBC,MAJoB,8FAS1BP,OAAO,CAACQ,KAAR,CAAc,gBAAd,EAT0B,oEAAH,kBAArBL,sBAAqB,0CAA3B,CAaAjB,SAAS,CAAC,UAAM,CACdc,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBT,IAAvB,EACAW,qBAAqB,GACtB,CAHQ,CAGN,CAACX,IAAD,CAHM,CAAT,CAKAN,SAAS,CAAC,UAAM,CACduB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAkChB,YAAlC,EACA,MAAO,WAAM,CACXe,MAAM,CAACE,mBAAP,CAA2B,QAA3B,CAAqCjB,YAArC,EACD,CAFD,CAGD,CALQ,CAKN,EALM,CAAT,CAOA,mBACE,kBADF,CAOD,CAED"},"metadata":{},"sourceType":"module"}