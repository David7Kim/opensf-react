{"ast":null,"code":"import _regeneratorRuntime from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainHome(){//로그인  리다이렉트\nvar navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userInfo=_useState2[0],setUserInfo=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userPic=_useState4[0],setUserPic=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userIsAdmin=_useState6[0],setUserIsAdmin=_useState6[1];//프로필 설정 화면(팝업으로 변경 할 예정임)\nvar settingProfile=function settingProfile(){navigate(\"/user/update\");};//로그아웃\nvar logOut=function logOut(){sessionOut();navigate(\"/login\");};//캘린더 화면\nvar calendar=function calendar(){navigate(\"/calendar\");};//게시판 화면\nvar board=function board(){navigate(\"/board\");};//관리자 화면\nvar admin=function admin(){navigate(\"/set/admin\");};//세션초기화\nvar sessionOut=function sessionOut(){axios({url:\"/logout\",method:\"POST\"});};//세션에 User-account가 남아 있지 않다면 로그인 화면으로 이동\nuseEffect(function(){var url=\"/userinfo\";var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:result=_context.sent;//유저 정보가 존재하지 않을경우 로그인 페이지\nif(result.data===\"\"||result.data.userProfileId.userAccount===\"\"||result.data.userProfileId.userAccount===undefined||result.length===0){navigate(\"/login\");}else{setUserInfo(result);setUserPic(result.data.userProfilePicPath);setUserIsAdmin(result.data.userIsAdmin);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"home_box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile_pic\",onClick:settingProfile,src:process.env.PUBLIC_URL+userPic,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_txt_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile_name\",children:userInfo.length===0?\"\":userInfo.data.userProfileId.userName}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_account\",children:userInfo.length===0?\"\":userInfo.data.userProfileId.userAccount}),userInfo.length!==0&&/*#__PURE__*/_jsx(\"div\",{className:\"profile_logout\",onClick:logOut,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"home_body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"home_body_box\",children:/*#__PURE__*/_jsx(\"table\",{className:\"tbl_home_body\",children:/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{onClick:calendar,children:[/*#__PURE__*/_jsx(\"img\",{src:require(\"../images/icn_calendar.png\")}),/*#__PURE__*/_jsx(\"div\",{className:\"home_li_txt\",children:\"\\uCE98\\uB9B0\\uB354\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{onClick:board,children:[/*#__PURE__*/_jsx(\"img\",{src:require(\"../images/icn_board.png\")}),/*#__PURE__*/_jsx(\"div\",{className:\"home_li_txt\",children:\"\\uAC8C\\uC2DC\\uD310\"})]})}),userIsAdmin&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{onClick:admin,children:[/*#__PURE__*/_jsx(\"img\",{src:require(\"../images/icn_board.png\")}),/*#__PURE__*/_jsx(\"div\",{className:\"home_li_txt\",children:\"\\uAD00\\uB9AC\\uC790\"})]})})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"home_footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"home_footer_box\",children:\"2022 @ ioss.co.kr | tykim\"})})]})});}export default MainHome;","map":{"version":3,"names":["useNavigate","useEffect","useState","axios","MainHome","navigate","userInfo","setUserInfo","userPic","setUserPic","userIsAdmin","setUserIsAdmin","settingProfile","logOut","sessionOut","calendar","board","admin","url","method","fetchData","get","result","data","userProfileId","userAccount","undefined","length","userProfilePicPath","process","env","PUBLIC_URL","userName","require"],"sources":["D:/reactProject/opensales/src/home/Home.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction MainHome() {\r\n  //로그인  리다이렉트\r\n  const navigate = useNavigate();\r\n\r\n  const [userInfo, setUserInfo] = useState([]);\r\n  const [userPic, setUserPic] = useState(\"\");\r\n  const [userIsAdmin, setUserIsAdmin] = useState(\"\");\r\n\r\n  //프로필 설정 화면(팝업으로 변경 할 예정임)\r\n  const settingProfile = () => {\r\n    navigate(\"/user/update\");\r\n  };\r\n  //로그아웃\r\n  const logOut = () => {\r\n    sessionOut();\r\n    navigate(\"/login\");\r\n  };\r\n  //캘린더 화면\r\n  const calendar = () => {\r\n    navigate(\"/calendar\");\r\n  };\r\n  //게시판 화면\r\n  const board = () => {\r\n    navigate(\"/board\");\r\n  };\r\n  //관리자 화면\r\n  const admin = () => {\r\n    navigate(\"/set/admin\");\r\n  };\r\n  //세션초기화\r\n  const sessionOut = () => {\r\n    axios({\r\n      url: \"/logout\",\r\n      method: \"POST\",\r\n    });\r\n  };\r\n  //세션에 User-account가 남아 있지 않다면 로그인 화면으로 이동\r\n  useEffect(() => {\r\n    let url = \"/userinfo\";\r\n    const fetchData = async () => {\r\n      const result = await axios.get(url);\r\n      //유저 정보가 존재하지 않을경우 로그인 페이지\r\n      if (\r\n        result.data === \"\" ||\r\n        result.data.userProfileId.userAccount === \"\" ||\r\n        result.data.userProfileId.userAccount === undefined ||\r\n        result.length === 0\r\n      ) {\r\n        navigate(\"/login\");\r\n      } else {\r\n        setUserInfo(result);\r\n        setUserPic(result.data.userProfilePicPath);\r\n        setUserIsAdmin(result.data.userIsAdmin);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"home_box\">\r\n      <div className=\"home_header\">\r\n        <div className=\"profile_box\">\r\n          {/**계정 정보 세팅 */}\r\n          <img className=\"profile_pic\" onClick={settingProfile} src={process.env.PUBLIC_URL + userPic} alt=\"\"></img>\r\n          {/**사용자 이름  */}\r\n          <div className=\"profile_txt_box\">\r\n            <div className=\"profile_name\">{userInfo.length === 0 ? \"\" : userInfo.data.userProfileId.userName}</div>\r\n            {/**사용자 계정  */}\r\n            <div className=\"profile_account\">{userInfo.length === 0 ? \"\" : userInfo.data.userProfileId.userAccount}</div>\r\n            {/**로그아웃 버튼  */}\r\n            {userInfo.length !== 0 && (\r\n              <div className=\"profile_logout\" onClick={logOut}>\r\n                로그아웃\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"home_body\">\r\n          <div className=\"home_body_box\">\r\n            <table className=\"tbl_home_body\">\r\n              <thead>\r\n                <tr>\r\n                  {/**캘린더 버튼 */}\r\n                  <td>\r\n                    <div onClick={calendar}>\r\n                      <img src={require(\"../images/icn_calendar.png\")}></img>\r\n                      <div className=\"home_li_txt\">캘린더</div>\r\n                    </div>\r\n                  </td>\r\n                  {/*게시판 버튼 */}\r\n                  <td>\r\n                    <div onClick={board}>\r\n                      <img src={require(\"../images/icn_board.png\")}></img>\r\n                      <div className=\"home_li_txt\">게시판</div>\r\n                    </div>\r\n                  </td>\r\n                  {/**Admin 관리자가 아닐경우 관리자 메뉴버튼은 false로 한다. */}\r\n                  {userIsAdmin && (\r\n                    <td>\r\n                      <div onClick={admin}>\r\n                        <img src={require(\"../images/icn_board.png\")}></img>\r\n                        <div className=\"home_li_txt\">관리자</div>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              </thead>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        {/*하단 영역 */}\r\n        <div className=\"home_footer\">\r\n          <div className=\"home_footer_box\">2022 @ ioss.co.kr | tykim</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MainHome;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}