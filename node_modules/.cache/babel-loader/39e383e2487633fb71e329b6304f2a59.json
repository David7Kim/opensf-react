{"ast":null,"code":"import _regeneratorRuntime from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/reactProject/opensales/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"../calendar/Calendar.css\";import\"./Board.css\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BoardAddPop(_ref){var leftFunc=_ref.leftFunc,rightFunc=_ref.rightFunc;var validate=function validate(){};//const [title, setTitle] = useState(\"\"); //제목\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),contents=_useState2[0],setContents=_useState2[1];//글내용\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userInfo=_useState4[0],setUserInfo=_useState4[1];var navigate=useNavigate();//세션 사용자 정보를 불러옵니다.\nuseEffect(function(){var url=\"/userinfo\";var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:result=_context.sent;if(result.data.userProfileId.userAccount===\"\"||result.data.userProfileId.userAccount===undefined||result.length===0){navigate(\"/login\");}else{setUserInfo(result);console.log(result);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);//글내용 값 입력 이벤트\nvar onChangeContents=function onChangeContents(e){setContents(e.currentTarget.value);};var addPost=function addPost(e){var baseUrl=\"/post/addPost\";var date=new Date();axios.post(baseUrl,{board_id:\"1\",//세션 게시판 아이디 받아와서 넣을예정\n//title: title,\ncontents:contents,writer:userInfo.data.userProfileId.userAccount,created_date:date,updated_date:date}).then(function(resp){console.log(resp);if(resp.data===\"SUCCESS\"){console.log(\"글 등록에 성공 하였습니다.\");rightFunc();//아닐 경우 Fail 리턴 , FailMessgae출력\n}else if(resp.data===\"FAIL\"){console.log(\"글 등록에 실패 하였습니다.\");}}).catch(function(error){console.log(error);console.log(\"글 등록에 실패 하였습니다.\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"post_add_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_add_header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post_menu_bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_add_ico_cancel\",onClick:leftFunc,children:\"X\"}),/*#__PURE__*/_jsx(\"div\",{className:\"menu_title\",children:\"\\uAE00\\uB4F1\\uB85D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"post_add_confirm_btn\",onClick:addPost,children:\"\\uD655\\uC778\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"post_add_body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"post_contents\",children:/*#__PURE__*/_jsx(\"div\",{className:\"post_txtarea\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\uBB34\\uC2A8 \\uC0DD\\uAC01\\uC744 \\uD558\\uACE0 \\uACC4\\uC2E0\\uAC00\\uC694?\",onChange:onChangeContents})})})})]});}export default BoardAddPop;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","BoardAddPop","leftFunc","rightFunc","validate","contents","setContents","userInfo","setUserInfo","navigate","url","fetchData","get","result","data","userProfileId","userAccount","undefined","length","console","log","onChangeContents","e","currentTarget","value","addPost","baseUrl","date","Date","post","board_id","writer","created_date","updated_date","then","resp","catch","error"],"sources":["D:/reactProject/opensales/src/board/BoardAddPop.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../calendar/Calendar.css\";\r\nimport \"./Board.css\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction BoardAddPop({ leftFunc, rightFunc }) {\r\n  const validate = () => {};\r\n  //const [title, setTitle] = useState(\"\"); //제목\r\n  const [contents, setContents] = useState(\"\"); //글내용\r\n  const [userInfo, setUserInfo] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  //세션 사용자 정보를 불러옵니다.\r\n  useEffect(() => {\r\n    let url = \"/userinfo\";\r\n    const fetchData = async () => {\r\n      const result = await axios.get(url);\r\n\r\n      if (\r\n        result.data.userProfileId.userAccount === \"\" ||\r\n        result.data.userProfileId.userAccount === undefined ||\r\n        result.length === 0\r\n      ) {\r\n        navigate(\"/login\");\r\n      } else {\r\n        setUserInfo(result);\r\n        console.log(result);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  //글내용 값 입력 이벤트\r\n  const onChangeContents = (e) => {\r\n    setContents(e.currentTarget.value);\r\n  };\r\n  const addPost = (e) => {\r\n    let baseUrl = \"/post/addPost\";\r\n    let date = new Date();\r\n    axios\r\n      .post(baseUrl, {\r\n        board_id: \"1\", //세션 게시판 아이디 받아와서 넣을예정\r\n        //title: title,\r\n        contents: contents,\r\n        writer: userInfo.data.userProfileId.userAccount,\r\n        created_date: date,\r\n        updated_date: date,\r\n      })\r\n      .then((resp) => {\r\n        console.log(resp);\r\n        if (resp.data === \"SUCCESS\") {\r\n          console.log(\"글 등록에 성공 하였습니다.\");\r\n          rightFunc();\r\n          //아닐 경우 Fail 리턴 , FailMessgae출력\r\n        } else if (resp.data === \"FAIL\") {\r\n          console.log(\"글 등록에 실패 하였습니다.\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        console.log(\"글 등록에 실패 하였습니다.\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"post_add_box\">\r\n      <div className=\"post_add_header\">\r\n        <div className=\"post_menu_bar\">\r\n          <div className=\"post_add_ico_cancel\" onClick={leftFunc}>\r\n            X\r\n          </div>\r\n          <div className=\"menu_title\">글등록</div>\r\n          <div className=\"post_add_confirm_btn\" onClick={addPost}>\r\n            확인\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"post_add_body\">\r\n        {/* <div className=\"post_title_input\">\r\n          <div className=\"post_title\">제목</div>\r\n          <div className=\"post_input_txt\">\r\n            <input type=\"text\" onChange={onChangeTitle} />\r\n          </div>\r\n        </div> */}\r\n        <div className=\"post_contents\">\r\n          <div className=\"post_txtarea\">\r\n            <textarea\r\n              placeholder=\"무슨 생각을 하고 계신가요?\"\r\n              onChange={onChangeContents}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default BoardAddPop;\r\n"],"mappings":"6VAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,0BAAP,CACA,MAAO,aAAP,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,QAASC,YAAT,MAA8C,IAAvBC,SAAuB,MAAvBA,QAAuB,CAAbC,SAAa,MAAbA,SAAa,CAC5C,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAAE,CAAzB,CACA;AACA,cAAgCP,QAAQ,CAAC,EAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eAA8C;AAC9C,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CAEA;AACAF,SAAS,CAAC,UAAM,CACd,GAAIY,IAAG,CAAG,WAAV,CACA,GAAMC,UAAS,6FAAG,sKACKZ,MAAK,CAACa,GAAN,CAAUF,GAAV,CADL,QACVG,MADU,eAGhB,GACEA,MAAM,CAACC,IAAP,CAAYC,aAAZ,CAA0BC,WAA1B,GAA0C,EAA1C,EACAH,MAAM,CAACC,IAAP,CAAYC,aAAZ,CAA0BC,WAA1B,GAA0CC,SAD1C,EAEAJ,MAAM,CAACK,MAAP,GAAkB,CAHpB,CAIE,CACAT,QAAQ,CAAC,QAAD,CAAR,CACD,CAND,IAMO,CACLD,WAAW,CAACK,MAAD,CAAX,CACAM,OAAO,CAACC,GAAR,CAAYP,MAAZ,EACD,CAZe,sDAAH,kBAATF,UAAS,2CAAf,CAcAA,SAAS,GACV,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA;AACA,GAAMU,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,CAAD,CAAO,CAC9BhB,WAAW,CAACgB,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAX,CACD,CAFD,CAGA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACH,CAAD,CAAO,CACrB,GAAII,QAAO,CAAG,eAAd,CACA,GAAIC,KAAI,CAAG,GAAIC,KAAJ,EAAX,CACA7B,KAAK,CACF8B,IADH,CACQH,OADR,CACiB,CACbI,QAAQ,CAAE,GADG,CACE;AACf;AACAzB,QAAQ,CAAEA,QAHG,CAIb0B,MAAM,CAAExB,QAAQ,CAACO,IAAT,CAAcC,aAAd,CAA4BC,WAJvB,CAKbgB,YAAY,CAAEL,IALD,CAMbM,YAAY,CAAEN,IAND,CADjB,EASGO,IATH,CASQ,SAACC,IAAD,CAAU,CACdhB,OAAO,CAACC,GAAR,CAAYe,IAAZ,EACA,GAAIA,IAAI,CAACrB,IAAL,GAAc,SAAlB,CAA6B,CAC3BK,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACAjB,SAAS,GACT;AACD,CAJD,IAIO,IAAIgC,IAAI,CAACrB,IAAL,GAAc,MAAlB,CAA0B,CAC/BK,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACD,CACF,CAlBH,EAmBGgB,KAnBH,CAmBS,SAACC,KAAD,CAAW,CAChBlB,OAAO,CAACC,GAAR,CAAYiB,KAAZ,EACAlB,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACD,CAtBH,EAuBD,CA1BD,CA4BA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,YAAK,SAAS,CAAC,qBAAf,CAAqC,OAAO,CAAElB,QAA9C,eADF,cAIE,YAAK,SAAS,CAAC,YAAf,gCAJF,cAKE,YAAK,SAAS,CAAC,sBAAf,CAAsC,OAAO,CAAEuB,OAA/C,0BALF,GADF,EADF,cAYE,YAAK,SAAS,CAAC,eAAf,uBAOE,YAAK,SAAS,CAAC,eAAf,uBACE,YAAK,SAAS,CAAC,cAAf,uBACE,iBACE,WAAW,CAAC,wEADd,CAEE,QAAQ,CAAEJ,gBAFZ,EADF,EADF,EAPF,EAZF,GADF,CA+BD,CACD,cAAepB,YAAf"},"metadata":{},"sourceType":"module"}